{"version":3,"sources":["helpers.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgBO,SAAS,SAAS,CAAC,MAAM,EAAE;AAChC,MAAI,MAAM,GAAG,MAAM,CAAA;;AAEnB,QAAM,GAAG,MAAM,CAAC,OAAO,CAAC,sBAAsB,EAAE,kBAAkB,CAAC,CAAA;;;AAGnE,QAAM,GAAG,MAAM,CAAC,OAAO,CAAC,MAAM,EAAE,UAAS,EAAE,EAAE;AAC3C,WAAO,GAAG,GAAG,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,WAAW,EAAE,CAAA;GACzD,CAAC,CAAA;;AAEF,SAAO,MAAM,CAAA;CACd;;AAEM,SAAS,iBAAiB,CAAC,MAAM,EAAE;AACxC,MAAI,MAAM,GAAG,MAAM,CAAA;;AAEnB,QAAM,GAAG,MAAM,CAAC,OAAO,CAAC,sBAAsB,EAAE,kBAAkB,CAAC,CAAA;AACnE,QAAM,GAAG,MAAM,CAAC,OAAO,CAAC,KAAK,EAAE,GAAG,CAAC,CAAA;;AAEnC,SAAO,MAAM,CAAA;CACd;;AAEM,SAAS,QAAQ,CAAC,MAAM,EAAE,IAAI,EAAE;AACrC,SAAU,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,SAAI,MAAM,sBAAkB;CAC9D;;AAEM,SAAS,SAAS,CAAC,IAAI,EAAE;AAC9B,MAAI,MAAM,GAAG;AACX,sBAAkB,EAAE,WAAW;AAC/B,qCAAiC,EAAE,gBAAgB;AACnD,qCAAiC,EAAE,gBAAgB;AACnD,qCAAiC,EAAE,gBAAgB;AACnD,mCAA+B,EAAE,cAAc;AAC/C,gCAA4B,EAAE,WAAW;AACzC,gCAA4B,EAAE,WAAW;AACzC,iCAA6B,EAAE,WAAW;AAC1C,gCAA4B,EAAE,WAAW;AACzC,gCAA4B,EAAE,WAAW;AACzC,oCAAgC,EAAE,YAAY;AAC9C,yCAAqC,EAAE,eAAe;GACvD,CAAA;;AAED,MAAI,MAAM,CAAC,IAAI,CAAC,KAAK,SAAS,EAAE;AAC9B,WAAO,MAAM,CAAC,IAAI,CAAC,CAAA;GACpB,MAAM;AACL,WAAO,WAAW,CAAA;GACnB;CACF;;AAEM,SAAS,kBAAkB,CAAC,MAAM,EAAE;;AAEzC,MAAI,MAAM,KAAK,IAAI,EAAE;AACnB,WAAO,KAAK,CAAA;GACb;;;AAGD,MAAI,MAAM,CAAC,MAAM,GAAG,CAAC,IAAI,MAAM,CAAC,MAAM,GAAG,EAAE,EAAE;AAC3C,WAAO,KAAK,CAAA;GACb;;;;AAID,MAAI,GAAG,GAAG,iCAAiC,CAAA;AAC3C,MAAI,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK,IAAI,EAAE;AAC9B,WAAO,KAAK,CAAA;GACb;;;AAGD,MAAI,GAAG,GAAG,gCAAgC,CAAA;AAC1C,MAAI,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK,IAAI,EAAE;AAC9B,WAAO,KAAK,CAAA;GACb;;AAED,SAAO,IAAI,CAAA;CACZ;;;;;;AAKM,SAAS,SAAS,GAAa;oCAAT,OAAO;AAAP,WAAO;;;AAClC,SAAO,OAAO,CAAC,MAAM,CAAC,UAAC,GAAG,EAAE,GAAG,EAAK;AAClC,OAAG,CAAC,EAAE,CAAC,OAAO,EAAE,UAAA,GAAG;aAAI,GAAG,CAAC,IAAI,CAAC,OAAO,EAAE,GAAG,CAAC;KAAA,CAAC,CAAA;AAC9C,WAAO,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA;GACrB,CAAC,CAAA;CACH","file":"helpers.js","sourcesContent":["/*\n * Minio Javascript Library for Amazon S3 Compatible Cloud Storage, (C) 2015 Minio, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport function uriEscape(string) {\n  var output = string\n    // this was originally escape instead of encodeURIComponent but escape is deprecated.\n  output = output.replace(/[^A-Za-z0-9_.~\\-%]+/g, encodeURIComponent)\n\n  // AWS percent-encodes some extra non-standard characters in a URI\n  output = output.replace(/[*]/g, function(ch) {\n    return '%' + ch.charCodeAt(0).toString(16).toUpperCase()\n  })\n\n  return output\n}\n\nexport function uriResourceEscape(string) {\n  var output = string\n    // this was originally escape instead of encodeURIComponent but escape is deprecated.\n  output = output.replace(/[^A-Za-z0-9_.~\\-%]+/g, encodeURIComponent)\n  output = output.replace('%2F', '/')\n\n  return output\n}\n\nexport function getScope(region, date) {\n  return `${date.format('YYYYMMDD')}/${region}/s3/aws4_request`\n}\n\nexport function getRegion(host) {\n  var region = {\n    's3.amazonaws.com': 'us-east-1',\n    's3-ap-northeast-1.amazonaws.com': 'ap-northeast-1',\n    's3-ap-southeast-1.amazonaws.com': 'ap-southeast-1',\n    's3-ap-southeast-2.amazonaws.com': 'ap-southeast-2',\n    's3-eu-central-1.amazonaws.com': 'eu-central-1',\n    's3-eu-west-1.amazonaws.com': 'eu-west-1',\n    's3-eu-east-1.amazonaws.com': 'eu-east-1',\n    's3-external-1.amazonaws.com': 'us-east-1',\n    's3-us-west-1.amazonaws.com': 'us-west-1',\n    's3-us-west-2.amazonaws.com': 'us-west-2',\n    's3.cn-north-1.amazonaws.com.cn': 'cn-north-1',\n    's3-fips-us-gov-west-1.amazonaws.com': 'us-gov-west-1'\n  }\n\n  if (region[host] !== undefined) {\n    return region[host]\n  } else {\n    return 'us-east-1'\n  }\n}\n\nexport function validateBucketName(bucket) {\n  // test for null\n  if (bucket === null) {\n    return false\n  }\n\n  // bucket length between 3 and 63\n  if (bucket.length < 3 || bucket.length > 63) {\n    return false\n  }\n\n  // lower case, numbers, hyphens\n  // starts and ends with letters or numbers\n  var re1 = /^[a-z0-9]+[a-z0-9\\-]*[a-z0-9]+$/\n  if (bucket.match(re1) === null) {\n    return false\n  }\n\n  // no ip address style\n  var re2 = /[0-9]+\\.[0-9]+\\.[0-9]+\\.[0-9]+/\n  if (bucket.match(re2) !== null) {\n    return false\n  }\n\n  return true\n}\n\n// pipesetup sets up pipe() from left to right os streams array\n// pipesetup will also make sure that error emitted at any of the upstream Stream\n// will be emited at the last stream. This makes error handling simple\nexport function pipesetup(...streams) {\n  return streams.reduce((src, dst) => {\n    src.on('error', err => dst.emit('error', err))\n    return src.pipe(dst)\n  })\n}\n"],"sourceRoot":"/source/"}